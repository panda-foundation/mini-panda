namespace test;

public function expression()
{
    console.write_string("============ test expression ============\n");

    test_unary();
    test_binary();
    //test_conversion();
    test_increment();
    test_decrement();
    //test_identifier();
    test_initializer();
    //test_member_access();
    //test_subscripting();
    test_others();
}

public function test_unary()
{
    assert(true, "constant true should equal true\n");
    assert(!false, "constant !false should equal true\n");
    var v1 i32 = +1;
    assert(v1 == 1, "unary (+), +1 should equal 1\n");
    var v2 i32 = -v1;
    assert(v2 == -1, "unary (-), -1 should equal -1\n");
    var v3 u32 = ~1;
    assert(v3 == 4294967294, "unary (~), u32 ~1 should equal 4294967294\n");
    var v4 i32 = ~1;
    assert(v4 == -2, "unary (~), i32 ~1 should equal -2\n");
    var v5 bool = false;
    assert(!v5, "unary (!), !false should equal true\n");
    var v6 pointer<i32> = &v1;
    var v7 i32 = *v6;
    assert(v7 == 1, "unary (*), *variable should equal 1\n");
}

public function test_increment()
{
    var v i32 = 0;
    v++;
    assert(v == 1, "increment 1++ should equal 2\n");
}

public function test_decrement()
{
    var v i32 = 0;
    v--;
    assert(v == -1, "increment 1++ should equal 2\n");
}


public function test_binary()
{
    var v i32;
    v = 5;
    assert(v == 5, "assign v to 5\n");
    v += 5;
    assert(v == 10, "v plus assign 5 should equal 10\n");
    v -= 2;
    assert(v == 8, "v minus assign 2 should equal 8\n");
    v *= 2;
    assert(v == 16, "v multi assign 2 should equal 16\n");
    v /= 4;
    assert(v == 4, "v divide assign 4 should equal 4\n");
    v %= 3;
    assert(v == 1, "v rem assign 4 should equal 1\n");
    
    v <<= 2;
    assert(v == 4, "v left shift assign 2 should equal 4\n");
    v >>= 1;
    assert(v == 2, "v right shift assign 1 should equal 2\n");
    v |= 1;
    assert(v == 3, "v or assign 1 should equal 3\n");
    v ^= 8;
    assert(v == 11, "v xor assign 8 should equal 11\n");
    v &= 6;
    assert(v == 2, "v and assign 6 should equal 2\n");

    assert((11 | 6) == 15, "11 | 6 should equal 15\n");
    assert((11 ^ 6) == 13, "11 ^ 6 should equal 13\n");
    assert((11 & 6) == 2, "11 & 6 should equal 2\n");
    assert(9 == 9, "9 == 9 should be true\n");
    assert(9 != 6, "9 != 6 should be true\n");
    assert(6 < 9, "6 < 9 should be true\n");
    assert(9 <= 9, "9 <= 9 should be true\n");
    assert(9 > 6, "9 > 6 should be true\n");
    assert(9 >= 9, "9 >= 9 should be true\n");
    assert((1 << 2) == 4, "1 << 2 should equal 4\n");
    assert((4 >> 1) == 2, "4 >> 1 should equal 2\n");
    assert(9 + 9 == 18, "9 + 9 should equal 18\n");
    assert(9 - 6 == 3, "9 - 6 should equal 3\n");
    assert(9 * 9 == 81, "9 * 9 should equal 81\n");
    assert(9 / 3 == 3, "9 / 3 should equal 3\n");
    assert(9 % 6 == 3, "9 % 6 should equal 3\n");
    assert((true || false) == true, "true || false should be true\n");
    assert((true && false) == false, "true && false should be false\n");
}

public function test_others()
{
    assert((8 - 3) * 5 == 25, "(8 - 3) * 5 should equal 25\n");
    assert('a' == 97, "'a' should equal 97\n");
}

////TO-DO int myNumbers[] = {25, 50, 75, 100};
//TO-DO add struct
public function test_initializer()
{

}